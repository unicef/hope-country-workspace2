{% extends "workspace/change_form.html" %}
{% load i18n  static admin_modify workspace_urls workspace_modify %}
{% block content_title %}{% endblock %}
{% block coltype %}colMX{% endblock %}

{#{% if not is_popup %}#}
{#    {% block breadcrumbs %}#}
{#        <div class="breadcrumbs">#}
{#            <a href="{% url 'workspace:index' %}">{% translate 'Workspaces' %}</a>#}
{#            &rsaquo; <a#}
{#                href="{% url 'workspace:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a>#}
{#            &rsaquo; {% if has_view_permission %}#}
{#            {% url opts|workspace_urlname:'changelist' as wcl %}#}
{#            <a href="{% add_preserved_filters wcl %}">{{ opts.verbose_name_plural|capfirst }}</a>{% else %}#}
{#            {{ opts.verbose_name_plural|capfirst }}{% endif %}#}
{##}
{#            &rsaquo;#}
{#            {% if add %}{% blocktranslate with name=opts.verbose_name %}Add {{ name }}{% endblocktranslate %}{% else %}#}
{#                {{ original|truncatewords:"18" }}{% endif %}#}
{#        </div>#}
{#    {% endblock %}#}
{#{% endif %}#}


{% block content %}
    {% block object-tools %}
        {{ block.super }}
{#        {% if change and not is_popup %}#}
{#            <ul class="object-tools">#}
{#                {% block object-tools-items %}#}
{#                    {% change_form_object_tools %}#}
{#                    {% include "~admin_extra_buttons/includes/change_form_buttons.html" %}#}
{#                {% endblock %}#}
{#            </ul>#}
{#        {% endif %}#}
    {% endblock %}
    <div id="content"  class="min-w-full">
        <div id="content-main"  class="min-w-full">
            <form  class="min-w-full beneficiary-form" {% if has_file_field %}enctype="multipart/form-data" {% endif %}{% if form_url %}action="{{ form_url }}" {% endif %}method="post"
                  id="{{ opts.model_name }}_form" novalidate>{% csrf_token %}{% block form_top %}{% endblock %}
                <div  class="min-w-full">
                    {% if is_popup %}<input type="hidden" name="{{ is_popup_var }}" value="1">{% endif %}
                    {% if to_field %}<input type="hidden" name="{{ to_field_var }}" value="{{ to_field }}">{% endif %}
                    {% if save_on_top %}{% block submit_buttons_top %}{% submit_row %}{% endblock %}{% endif %}
                    {% if errors %}
                        <p class="errornote">
                            {% blocktranslate count counter=errors|length %}Please correct the error below.{% plural %}
                                Please correct the errors below.{% endblocktranslate %}
                        </p>
                        {{ adminform.form.non_field_errors }}
                    {% endif %}
                    {% if original.errors %}
                        <div class="error"> Record does not validate and cannot be sent to HOPE</div>
                    {% endif %}
                    {% block field_sets %}
                        <table  class="min-w-full">
                            {% block pre_checker_form %}{% endblock %}
                            {% include "workspace/includes/flex_field_form.html" with  form=checker_form fields=original.flex_fields %}
                        </table>
                    {% endblock %}
                    {% block after_related_objects %}{% endblock %}
                    {% block submit_buttons_bottom %}{% submit_row %}{% endblock %}
                    {% block admin_change_form_document_ready %}
                        <script id="django-admin-form-add-constants"
                                src="{% static 'workspace/js/change_form.js' %}"
                                {% if adminform and add %}
                                data-model-name="{{ opts.model_name }}"
                                {% endif %}
                                async>
                        </script>
                    {% endblock %}
                    {% prepopulated_fields_js %}
                </div>
            </form>
        </div>
{% endblock %}
